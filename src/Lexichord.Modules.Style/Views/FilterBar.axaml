<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="using:Lexichord.Modules.Style.ViewModels"
             mc:Ignorable="d"
             d:DesignWidth="400" d:DesignHeight="40"
             x:Class="Lexichord.Modules.Style.Views.FilterBar"
             x:DataType="vm:FilterViewModel">
    
    <!-- 
    FilterBar: Search and Filter Controls (v0.2.5b)
    Provides debounced text search and toggle filters for the Lexicon grid.
    -->

    <Border Background="{DynamicResource SystemControlBackgroundAltHighBrush}"
            BorderBrush="{DynamicResource SystemControlForegroundBaseMediumLowBrush}"
            BorderThickness="0,0,0,1"
            Padding="8,6">
        
        <Grid ColumnDefinitions="*,Auto,Auto,Auto,Auto,Auto">
            
            <!-- Search TextBox with Icon -->
            <TextBox Grid.Column="0"
                     Text="{Binding SearchText, Mode=TwoWay}"
                     Watermark="Search terms..."
                     VerticalContentAlignment="Center"
                     Margin="0,0,8,0">
                <TextBox.InnerLeftContent>
                    <PathIcon Data="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z" 
                              Width="14" Height="14"
                              Margin="6,0,4,0"
                              Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"/>
                </TextBox.InnerLeftContent>
            </TextBox>

            <!-- Separator -->
            <Separator Grid.Column="1" 
                       Width="1" 
                       Margin="4,4,8,4"
                       Background="{DynamicResource SystemControlForegroundBaseMediumLowBrush}"/>

            <!-- Show Inactive Toggle -->
            <ToggleButton Grid.Column="2"
                          IsChecked="{Binding ShowInactive}"
                          ToolTip.Tip="Include inactive terms"
                          Margin="0,0,8,0"
                          Padding="6,4">
                <StackPanel Orientation="Horizontal" Spacing="4">
                    <PathIcon Data="M12,4V2A10,10 0 0,0 2,12H4A8,8 0 0,1 12,4ZM18.92,8H22A10,10 0 0,0 12,2V4A8,8 0 0,1 18.92,8ZM20,12H22A10,10 0 0,1 12,22V20A8,8 0 0,0 20,12ZM12,20V22A10,10 0 0,1 2,12H4A8,8 0 0,0 12,20Z"
                              Width="14" Height="14"/>
                    <TextBlock Text="Inactive" 
                               FontSize="11"
                               VerticalAlignment="Center"/>
                </StackPanel>
            </ToggleButton>

            <!-- Category Dropdown -->
            <ComboBox Grid.Column="3"
                      ItemsSource="{Binding AvailableCategories}"
                      SelectedItem="{Binding SelectedCategory}"
                      PlaceholderText="Category"
                      MinWidth="100"
                      Margin="0,0,4,0"
                      VerticalContentAlignment="Center"/>

            <!-- Severity Dropdown -->
            <ComboBox Grid.Column="4"
                      ItemsSource="{Binding AvailableSeverities}"
                      SelectedItem="{Binding SelectedSeverity}"
                      PlaceholderText="Severity"
                      MinWidth="90"
                      Margin="0,0,8,0"
                      VerticalContentAlignment="Center"/>

            <!-- Clear Button -->
            <Button Grid.Column="5"
                    Command="{Binding ClearFiltersCommand}"
                    ToolTip.Tip="Clear all filters"
                    IsVisible="{Binding HasActiveFilters}"
                    Padding="6,4">
                <PathIcon Data="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"
                          Width="14" Height="14"/>
            </Button>

        </Grid>
    </Border>
</UserControl>
