<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vm="using:Lexichord.Modules.StatusBar.ViewModels"
        mc:Ignorable="d"
        d:DesignWidth="400" d:DesignHeight="200"
        x:Class="Lexichord.Modules.StatusBar.Views.ApiKeyDialog"
        x:DataType="vm:ApiKeyDialogViewModel"
        Title="Configure API Key"
        Width="400"
        Height="200"
        WindowStartupLocation="CenterOwner"
        CanResize="False">

    <!--
    ═══════════════════════════════════════════════════════════════════════════
    API KEY DIALOG (v0.0.8a - Placeholder)
    Dialog for entering and storing API keys in the secure vault.
    
    LOGIC: This is a minimal placeholder implementation.
    Full vault integration comes in v0.0.8c.
    ═══════════════════════════════════════════════════════════════════════════
    -->

    <Grid Margin="20" RowDefinitions="Auto,*,Auto">
        
        <!-- Header -->
        <StackPanel Grid.Row="0" Spacing="8">
            <TextBlock Text="Enter API Key" 
                       FontSize="16" 
                       FontWeight="SemiBold"/>
            <TextBlock Text="The key will be securely stored in the encrypted vault."
                       FontSize="12"
                       Opacity="0.7"
                       TextWrapping="Wrap"/>
        </StackPanel>

        <!-- Input -->
        <StackPanel Grid.Row="1" VerticalAlignment="Center" Spacing="8">
            <TextBox Text="{Binding ApiKey}"
                     Watermark="sk-..."
                     PasswordChar="●"
                     IsEnabled="{Binding !IsSaving}"/>
            
            <TextBlock Text="{Binding ErrorMessage}"
                       Foreground="#F44336"
                       IsVisible="{Binding HasError}"
                       FontSize="12"/>
        </StackPanel>

        <!-- Buttons -->
        <StackPanel Grid.Row="2" 
                    Orientation="Horizontal" 
                    HorizontalAlignment="Right"
                    Spacing="8">
            <Button Content="Cancel"
                    Command="{Binding CancelCommand}"
                    IsEnabled="{Binding !IsSaving}"
                    Width="80"/>
            <Button Content="Save"
                    Command="{Binding SaveCommand}"
                    IsEnabled="{Binding !IsSaving}"
                    Width="80"
                    Classes="accent"/>
        </StackPanel>
        
    </Grid>
</Window>
