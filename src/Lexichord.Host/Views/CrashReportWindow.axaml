<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        x:Class="Lexichord.Host.Views.CrashReportWindow"
        Title="Lexichord - Crash Report"
        Width="700" Height="500"
        MinWidth="500" MinHeight="400"
        WindowStartupLocation="CenterScreen"
        CanResize="True"
        ShowInTaskbar="True"
        SystemDecorations="Full">

    <!--
    ═══════════════════════════════════════════════════════════════════
    CRASH REPORT DIALOG
    Displays exception details with copy-to-clipboard functionality.
    The user can copy the report for support tickets.
    ═══════════════════════════════════════════════════════════════════
    -->

    <Grid RowDefinitions="Auto,*,Auto" Margin="20">
        <!-- Header -->
        <StackPanel Grid.Row="0" Spacing="10" Margin="0,0,0,15">
            <TextBlock Text="An unexpected error occurred"
                       FontSize="20"
                       FontWeight="SemiBold"
                       Foreground="{DynamicResource SystemFillColorCriticalBrush}" />
            <TextBlock Text="Lexichord encountered a problem and needs to close. We apologize for the inconvenience."
                       TextWrapping="Wrap"
                       Foreground="{DynamicResource TextFillColorSecondaryBrush}" />
            <TextBlock x:Name="ReportPathText"
                       Text="Crash report saved to: [path]"
                       FontSize="12"
                       Foreground="{DynamicResource TextFillColorTertiaryBrush}" />
        </StackPanel>

        <!-- Exception Details -->
        <Border Grid.Row="1"
                Background="{DynamicResource CardBackgroundFillColorDefaultBrush}"
                BorderBrush="{DynamicResource CardStrokeColorDefaultBrush}"
                BorderThickness="1"
                CornerRadius="4"
                Padding="10">
            <ScrollViewer HorizontalScrollBarVisibility="Auto"
                          VerticalScrollBarVisibility="Auto">
                <TextBox x:Name="ExceptionDetails"
                         IsReadOnly="True"
                         AcceptsReturn="True"
                         TextWrapping="Wrap"
                         FontFamily="Consolas, Monaco, 'Courier New', monospace"
                         FontSize="12"
                         Background="Transparent"
                         BorderThickness="0" />
            </ScrollViewer>
        </Border>

        <!-- Buttons -->
        <StackPanel Grid.Row="2"
                    Orientation="Horizontal"
                    HorizontalAlignment="Right"
                    Spacing="10"
                    Margin="0,15,0,0">
            <Button x:Name="CopyButton"
                    Content="Copy to Clipboard"
                    Click="OnCopyClicked"
                    Width="140" />
            <Button x:Name="OpenFolderButton"
                    Content="Open Reports Folder"
                    Click="OnOpenFolderClicked"
                    Width="150" />
            <Button x:Name="CloseButton"
                    Content="Close Application"
                    Click="OnCloseClicked"
                    Classes="accent"
                    Width="140" />
        </StackPanel>
    </Grid>
</Window>
