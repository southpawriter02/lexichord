<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:shell="using:Lexichord.Host.Views.Shell"
        xmlns:dock="using:Dock.Avalonia.Controls"
        xmlns:vm="using:Lexichord.Host.ViewModels"
        xmlns:local="using:Lexichord.Host.Views"
        x:Class="Lexichord.Host.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Title="Lexichord — The Orchestrator"
        Width="1400"
        Height="900"
        MinWidth="1024"
        MinHeight="768"
        WindowStartupLocation="CenterScreen">

    <!--
    ═══════════════════════════════════════════════════════════════════════════
    PODIUM LAYOUT with PALETTE OVERLAY
    The main shell uses a Panel to layer the palette overlay on top of content.
    ═══════════════════════════════════════════════════════════════════════════
    -->

    <Panel>
        <!-- Main content grid -->
        <Grid RowDefinitions="Auto,*,Auto">

        <!-- ═══════════════════════════════════════════════════════════════════
             ROW 0: TOP BAR
             Application title and optional menu/controls
             Height: Auto (sized to content, typically 48px)
             ═══════════════════════════════════════════════════════════════════ -->
        <shell:TopBar Grid.Row="0" />

        <!-- ═══════════════════════════════════════════════════════
             ROW 1: CONTENT AREA
             Contains the dock-based layout system with resizable panels
             Height: * (fills remaining space)
             ═══════════════════════════════════════════════════════ -->
        <Grid Grid.Row="1" ColumnDefinitions="60,*">

            <!-- Navigation Rail: Section switching icons -->
            <shell:NavigationRail Grid.Column="0" />

            <!-- v0.1.1a: Dock-based Content Area -->
            <dock:DockControl Grid.Column="1"
                              Layout="{Binding Layout}"
                              InitializeFactory="True"
                              InitializeLayout="True">
                <dock:DockControl.Styles>
                    <!-- Consistent styling with Lexichord theme -->
                    <Style Selector="dock|ToolChromeControl">
                        <Setter Property="Background" Value="{DynamicResource SystemControlBackgroundChromeMediumBrush}"/>
                    </Style>
                    <Style Selector="dock|DocumentTabStripItem">
                        <Setter Property="FontFamily" Value="{StaticResource InterFont}"/>
                    </Style>
                </dock:DockControl.Styles>
            </dock:DockControl>

        </Grid>

        <!-- ═══════════════════════════════════════════════════════════════════
             ROW 2: STATUS BAR
             System status, theme toggle, version info
             Height: Auto (sized to content, typically 28px)
             ═══════════════════════════════════════════════════════════════════ -->
        <shell:StatusBar Grid.Row="2" x:Name="MainStatusBar" />

        </Grid>

        <!-- v0.1.5b: Command Palette Overlay -->
        <local:CommandPaletteView x:Name="CommandPalette"
                                   DataContext="{Binding CommandPaletteViewModel}"/>
    </Panel>

</Window>
